var Err,RnR,__bind=function(a,b){return function(){return a.apply(b,arguments)}};RnR=function(){function a(){this.handleContactFormSubmit=__bind(this.handleContactFormSubmit,this),this.handleGenerateNext=__bind(this.handleGenerateNext,this),this.handleOnSubmit=__bind(this.handleOnSubmit,this)}return a.prototype.letsGo=function(){this.wrapperEl=document.querySelector("#form-wrapper"),this.contentWrapperEl=this.wrapperEl.querySelector(".form-content"),this.inputEl=this.contentWrapperEl.querySelector("#form-input"),this.formEl=this.contentWrapperEl.querySelector("form"),this.resultEl=this.contentWrapperEl.querySelector(".form-res p"),this.generateNextEl=this.contentWrapperEl.querySelector("#form-next"),this.historyEl=document.querySelector("#history"),this.fillHistory(),this.contactForm=document.querySelector("#contact-form"),this.formEl.addEventListener("submit",this.handleOnSubmit,!1),this.generateNextEl.addEventListener("click",this.handleGenerateNext,!1),this.contactForm.addEventListener("submit",this.handleContactFormSubmit,!1)},a.prototype.handleOnSubmit=function(b){var c,d,e,f;return b.preventDefault(),""===this.inputEl.value?this.alrt("nevložil(a) jsi žádnou adresu."):(this.setLoader(!0),f={page:this.inputEl.value},e=function(a){return function(b){var c,d;try{c=JSON.parse(b),a.resultEl.innerHTML=c.html,a.contentWrapperEl.classList.add("show-result"),a.addHistoryItem(c.html),c.big_fuck_up&&a.alrt('nepodařilo se nám zjistit všechny informace. Je zadaná adresa správně (včetně "www")?')}catch(e){d=e,a.alrt('nepodařilo se nám zjistit všechny informace. Je zadaná adresa správně (včetně "www")?')}}}(this),d=function(a){return function(){a.alrt('nepodařilo se nám zjistit všechny informace. Je zadaná adresa správně (včetně "www")?')}}(this),c=function(a){return function(){a.setLoader(!1)}}(this),$.post(a.PARSER_URL,f).done(e).fail(d).always(c)),!1},a.prototype.handleGenerateNext=function(a){this.inputEl.value="",this.contentWrapperEl.classList.remove("show-result")},a.prototype.setLoader=function(a){a?this.wrapperEl.classList.add("show-loader"):this.wrapperEl.classList.remove("show-loader")},a.prototype.fillHistory=function(){var a,b,c,d,e;if(this.lsHistory=this.lsHistory||this.getLsHistory(),this.lsHistory.length)for(this.historyEl.innerHTML="",b=d=e=this.lsHistory.length-1;d>=0;b=d+=-1)a=this.lsHistory[b],c=document.createElement("p"),c.classList.add("quote"),c.innerHTML=a,this.historyEl.appendChild(c)},a.prototype.addHistoryItem=function(b){this.lsHistory=this.lsHistory||this.getLsHistory(),this.lsHistory.push(b),this.lsHistory.length>a.HISTORY_LENGTH&&this.lsHistory.shift(),this.setLsHistory(this.lsHistory),this.fillHistory()},a.prototype.getLsHistory=function(){var a;return localStorage.getItem("cintace-z-webu")||this.setLsHistory([]),a=JSON.parse(localStorage.getItem("cintace-z-webu")),a.history},a.prototype.setLsHistory=function(a){localStorage.setItem("cintace-z-webu",JSON.stringify({history:a}))},a.prototype.handleContactFormSubmit=function(b){var c,d,e;b.preventDefault(),e={message:[b.target[0].value,b.target[1].value,b.target[2].value]},d=function(a){return function(b){var c,d;try{c=JSON.parse(b),c.success?a.alrt("Zpráva byla odeslána.",!1):a.alrt("Zprávu se nepodařilo odeslat. Zkus to znovu nebo napiš na Facebook.")}catch(e){d=e,a.alrt("Zprávu se nepodařilo odeslat. Zkus to znovu nebo napiš na Facebook.")}}}(this),c=function(a){return function(){a.alrt("Zprávu se nepodařilo odeslat. Zkus to znovu nebo napiš na Facebook.")}}(this),$.post(a.PARSER_URL,e).done(d).fail(c)},a.prototype.alrt=function(a,b){null==b&&(b=!0),this.err=this.err||new Err,this.err.add(a,b)},a.PARSER_URL="http://j3ronimo.wz.cz/citace/server/server-citace.php",a.HISTORY_LENGTH=3,a}(),Err=function(){function a(){this.wrapperEl=document.querySelector("#flash"),this.contentEl=this.wrapperEl.querySelector("span")}return a.prototype.add=function(b,c){var d;null==c&&(c=!0),this.contentEl.innerHTML=b,c||this.wrapperEl.classList.add("ok"),this.wrapperEl.classList.remove("closed"),d=setTimeout(function(a){return function(){a.wrapperEl.classList.add("closed"),a.wrapperEl.classList.remove("ok")}}(this),a.SHOW)},a.SHOW=5e3,a}();